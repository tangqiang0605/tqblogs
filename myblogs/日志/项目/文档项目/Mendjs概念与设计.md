mock 目前只能拦截 ajax 请求？mend 可以弥补这个问题。mock 实践指南：拦截。
mend. js

一个普通的项目。

前端请求时，根据自己的需要定义请求的数据。在 mend 层中，如果请求不到真实数据，则返回 mock 数据，如果请求到真实数据，则对数据进行多对多的映射。

哲学：

以往请求都是一对一，就算是登录操作，涉及多次请求，但每次请求都是一对一处理。也就是前后端对接都是通过一一映射的函数关系实现的。mend 的核心概念就是是前后端对接不再是一一映射的关系，而是一对多、多对一、多对多的关系。

比如前端使用一次请求，获得 userinfo 对象，里面包含第一次的登录请求和登陆后通过 token 获得的数据，可能还有单独的头像地址。前端只需要写一个请求以及一个自己认为的抽象对象。mend 对请求进行拦截，如果后台无法返回正常的数据则进行 mock，mock 实现简单的一一映射，而如果后台可以正常反馈，调用三次接口并对接口返回的内容进行映射处理和错误处理（resolve、reject）

1. 提高开发效率，前端在后台完全开发完成之前可以完全脱离接口文档独立开发。可以配合 mock 使用。

2。提高可维护性。后台接口的改变不会影响前端的代码。就算换了一个全新的后台，也只需要更换 mend 层即可。是对前端可以一直使用自己定义的抽象数据。

3.

- 进度流畅
- 提高开发效率
- 减低沟通成本。
- 直觉化开发（有时候并不是优点）
- 架构解耦合。前端可以随时更换后台项目，



mendjs 快速入门：

mend ({

fakeData: 可以是 mock 对象、包含 mock 属性的对象、开发者填充临时数据的对象、接口请求返回的数据对象。

mapper：mapper 对象，描述后台真实接口对象的属性（value）与前端直觉接口对象属性（key）的映射关系。

realData：

})

返回的 promise 对象

{

}



mend 核心概念：

mend 意味 middle end，中端。以往，前端的请求和后台的接口都是一一映射的，即一次请求只能对应一个接口，一个萝卜一个坑。mend 将打破这种限制，让前后端的对接不止是一对一，还可以是一对多、多对多。这也是 mend 修补的意思。前端开发人员不需要和后台人员沟通，前期单纯依靠直觉来设计接口的返回值，并快速应用到项目当中去。而后台人员在前期也可以不用关注 api 文档，到最后后台人员完成了修修补补整个后台系统的开发，提供一套完整的 api 文档，前端人员这时再通过一个个简单 mend 的函数，就可以实现后台接口与前端直觉接口的映射。即使更换接口，前端也只需更改 mend 层，就可以快速完成请求数据的配对。

1. 接口映射。

在以往的开发中，前端的每一次请求都对应后台的一个接口。通过 mendjs，开发者可以方便地实现对应多个接口的请求，并且 mendjs 还会对映射的结果进行反馈。

2. 前端直觉接口对象与 mock。

在项目开发的前期，前后台人员完全不需要沟通，前端开发人员根据 ui、业务等信息结合自身直觉设计前端直觉接口，该接口返回一个前端直觉接口对象，用于页面数据的填充。而该对象在开发前期的来源，可以是 mock 数据，也可以是其他临时接口。

那么 mend 和 mock 是同一个东西吗？完全不是。mend 是一种架构，而 mock 是生成随机数据的一种方式。常用的随机数据库例如：mockjs、chancejs 等，都可以作为前端直觉接口的数据来源，用于填充前端直觉接口对象。值得一提的是，mockjs 提供的 Ajax 拦截功能和 mendjs 的假数据填充方向完全相反：mockjs 对发送的后台真实请求（也可能是随便填写的 url）进行拦截，返回假数据，而 mendjs 的思想则是在发送真实的后台请求前返回假的填充数据。

3. 后台真实接口。

通过 mendjs，前端人员完全可以在整个后台项目完成之前完成整个前端项目（除了需要被 mend 的部分）。在此期间设置完全不需要沟通！（这只是极端情况，事实更可能是后台的部分接口提前提供给前端调试，从而在整个项目完成前发现后台代码中的隐藏错误）前端开发人员根据自身直觉设计接口并返回数据供自己使用，以往的问题就是前端设计的接口对象和后台设计的接口返回对象可能大相径庭。而通过 mend，在后台交付项目后，前端人员可以轻松实现前端直觉接口对象和后台返回的真实对象的接口的映射！在实现映射中 mendjs 提供了简单的方法和思路，并对映射结果自动进行评估，这将大大减少映射任务的工作量，这时，工作的中心应该在前端直觉接口对象的各个属性值与后台真实接口返回对象属性值的识别和配对上。

mend 架构示例：

前端人员将页面放置在 pages 中，将 api 请求放置在 api 文件夹中。pages 中包含对页面的渲染，以及最重要的数据请求。数据请求是通过调用 api 文件夹中导出的函数实现的。该这种函数应该返回一个 promise 对象，方便我们在 pages 页面中根据 promise 的状态渲染完整的数据信息或者错误提示。

api 文件的导出函数返回值应该是一个 promise，在该方法内发送异步请求，所以他也应该被 async 修饰。最后，该函数通过调用 mend，实现前端直觉接口对象和后台接口返回数据的映射。


